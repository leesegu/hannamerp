/* src/pages/MobileCalendarPage.css */

/* 레이아웃/선명도 */
.mcal-page{
  display:flex; flex-direction:column;
  width:100%; height:100%;
  background:#fff;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  text-rendering:optimizeLegibility;

  /* ✅ [수정] 루트에 하단 safe-area 여백 추가 (루트 스크롤 대비) */
  padding-bottom: env(safe-area-inset-bottom);
}

/* ===== 헤더 ===== */
.mcal-header{
  position:sticky; top:0; z-index:5;
  background:#fff; border-bottom:1px solid #e5e7eb;
  /* ▼ 수정: 상단 safe-area 여백 추가 */
  padding: calc(6px + env(safe-area-inset-top)) 6px 6px;
  display:grid; row-gap:6px;
}
.mcal-header--3col{
  grid-template-columns: auto 1fr auto; /* 좌 | 중앙 | 우 */
  align-items:center;
}

/* 좌측: 뒤로가기(그라디언트, 소형화) */
.m-btn-back{
  height:32px; padding:0 10px; border-radius:999px; font-size:12px; font-weight:700;
  border:1px solid transparent; cursor:pointer; color:#fff; white-space:nowrap;
}
.m-btn-back--small{ height:32px; font-size:12px; padding:0 10px; }
.m-btn-back--pretty{
  background: linear-gradient(135deg, #7c3aed 0%, #6366f1 40%, #22d3ee 100%);
  box-shadow: 0 8px 24px rgba(99,102,241,.35), inset 0 0 0 1px rgba(255,255,255,.25);
}
.m-btn-back--pretty:hover{ filter: brightness(1.05); }

/* 중앙: 날짜 컨트롤 */
.mcal-header-center{
  display:flex; justify-content:center; align-items:center; gap:6px;
  min-width:0;
}
.mcal-header-center > *{ white-space:nowrap; }

/* 우측: 오늘 버튼 */
.mcal-header-right{ display:flex; justify-content:flex-end; align-items:center; }

/* 공통 버튼 */
.m-btn-plain{
  height:32px; padding:0 10px; border-radius:8px; font-size:12px;
  border:1px solid #d1d5db; background:#fff; cursor:pointer; white-space:nowrap;
}
.m-btn-plain:hover{ background:#f3f4f6; }
.m-btn-plain--small{ height:28px; font-size:12px; padding:0 10px; }

.m-btn-primary{
  height:32px; padding:0 12px; border-radius:10px; font-size:12px; color:#fff;
  background:#6d28d9; border:1px solid #6d28d9; cursor:pointer;
  box-shadow: 0 6px 18px rgba(109,40,217,.32); white-space:nowrap;
}
.m-btn-primary:hover{ filter:brightness(1.05); }

/* 검색 입력창: 다음 행 전체 폭 */
.m-inp-search{
  grid-column:1 / -1;
  width:100%; height:36px; border-radius:10px; padding:0 12px; font-size:13px;
  border:1px solid #d1d5db; outline:none;
}
.m-inp-search:focus{ box-shadow:0 0 0 2px rgba(99,102,241,.35); }

/* ===== 커스텀 드롭다운(연/월) ===== */
.m-dd-wrap{ position:relative; }
.m-dd-trigger{
  height:32px; padding:0 28px 0 10px; border-radius:10px; font-size:12px; font-weight:700;
  border:1px solid #d1d5db; background:
    radial-gradient(120px 40px at 20% 10%, rgba(124,58,237,.15), transparent 60%),
    radial-gradient(140px 50px at 80% 120%, rgba(34,211,238,.18), transparent 70%),
    #ffffff;
  backdrop-filter: blur(4px);
  position:relative; cursor:pointer; white-space:nowrap; display:inline-flex; align-items:center; gap:6px;
}
.m-dd-trigger.open{ box-shadow:0 0 0 2px rgba(99,102,241,.35); }
.m-dd-caret{
  width:0; height:0; border-left:5px solid transparent; border-right:5px solid transparent; border-top:6px solid #6b7280;
}

/* 패널: 트리거 중앙 하단, 가로폭 살짝 축소 */
.m-dd-panel{
  position:absolute; top:38px; left:50%; transform:translateX(-50%); z-index:20;
  min-width: 120px; max-width: 200px;
  border-radius:14px; padding:8px;
  background:
    radial-gradient(160px 60px at 10% -10%, rgba(99,102,241,.18), transparent 60%),
    radial-gradient(220px 80px at 110% 120%, rgba(34,197,94,.15), transparent 70%),
    rgba(255,255,255,.92);
  box-shadow: 0 20px 60px rgba(0,0,0,.18), inset 0 0 0 1px rgba(148,163,184,.28);
  backdrop-filter: blur(6px);
}
.m-dd-panel-inner{
  display:grid; grid-auto-rows:min-content; gap:6px; max-height:40vh; overflow:auto;
  padding:6px; text-align:center;
}
.m-dd-grid{ grid-template-columns: repeat(4, minmax(56px, 1fr)); }
/* 월 목록: 세로 스크롤 제거 */
.m-dd-panel-inner.no-scroll{
  max-height:none; overflow:visible;
}

.m-dd-item{
  border-radius:10px; border:1px solid #e5e7eb; background:#fff; padding:8px 10px;
  font-size:12px; font-weight:700; color:#111827; cursor:pointer;
  box-shadow:0 1px 0 rgba(17,24,39,.04);
  white-space:nowrap; display:flex; align-items:center; justify-content:center;
}
.m-dd-item:hover{ background:#f8fafc; }
.m-dd-item.sel{
  border-color:#6d28d9; box-shadow: inset 0 0 0 2px #6d28d9, 0 4px 14px rgba(109,40,217,.18);
}

/* ===== 요일/그리드 ===== */
.mcal-week-header{
  display:grid; grid-template-columns:repeat(7,1fr);
  text-align:center; font-size:12px; font-weight:700;
  background:#f9fafb; border-top:1px solid #e5e7eb; border-bottom:1px solid #e5e7eb;
}
.mcal-week-cell{ padding:6px 0; }

.mcal-grid{
  display:grid; grid-template-columns:repeat(7,1fr); grid-auto-rows:110px;
}
.m-day{
  position:relative; background:#fff; border:1px solid #f1f5f9; cursor:pointer;
}
.m-day--selected{ outline:2px solid #a78bfa; outline-offset:-2px; }
.m-day--today::after{
  content:""; position:absolute; inset:0; border:2px solid #a78bfa; border-radius:2px; pointer-events:none;
}
.m-daybar{
  height:20px; padding:0 6px; display:flex; align-items:center; justify-content:space-between; background:rgba(255,255,255,.85);
}
.m-daybar-date{ font-size:12px; user-select:none; }
.m-daybar-date--curr{ color:#374151; }
.m-daybar-date--dim{ color:#cbd5e1; }

/* 이벤트 (작고 선명) */
.m-event-area{ position:absolute; left:0; right:0; bottom:0; top:20px; padding:4px; overflow:hidden; }
.m-event-stack{ display:grid; grid-auto-rows:min-content; row-gap:3px; font-size:7px; }
.m-event-stack--overlay{ font-size:10px; }

/* pill (상태별 색상을 CSS 변수로도 고정해둠) */
.m-pill{
  width:100%; border-radius:8px; border:1px solid transparent;
  color:#fff; padding:2px 6px; pointer-events:none;
}
.m-pill-row{ display:flex; align-items:center; justify-content:space-between; gap:6px; min-width:0; font-weight:500; }
.m-pill-villa{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.m-pill-amt{ flex-shrink:0; }

/* 색상 + 변수 */
.m-pill--sky{    --pill-bg:#38bdf8; background:#38bdf8; border-color:#38bdf8; }
.m-pill--deepblue{ --pill-bg:#1e3a8a; background:#1e3a8a; border-color:#1e3a8a; }
.m-pill--darkgray{ --pill-bg:#6b7280; background:#6b7280; border-color:#6b7280; }
.m-pill--green{  --pill-bg:#22c55e; background:#22c55e; border-color:#22c55e; }
.m-pill--red{    --pill-bg:#ef4444; background:#ef4444; border-color:#ef4444; }
.m-pill--purple{ --pill-bg:#8b5cf6; background:#8b5cf6; border-color:#8b5cf6; }
.m-pill--amber{  --pill-bg:#f59e0b; background:#f59e0b; border-color:#f59e0b; }

/* ✅ 검색 매치 하이라이트: 배경 유지 + 진한 보라 테두리 */
.m-pill.is-match{
  box-shadow: 0 0 0 2px #5b21b6, 0 0 0 4px rgba(91,33,150,.22);
}

/* 더보기 */
.m-more-gradient{ position:absolute; left:0; right:0; bottom:0; padding:4px; background:linear-gradient(to top, rgba(255,255,255,.95), transparent); }
.m-more-btn{
  width:100%; border-radius:8px; font-size:11px; padding:4px 8px;
  border:1px solid #d1d5db; color:#374151; background:#fff; cursor:pointer;
  white-space:nowrap; pointer-events:auto;
}
.m-more-btn:hover{ background:#f9fafb; }
.m-more-overlay{
  position:fixed; z-index:100; max-height:60vh; overflow:auto; overflow-x:hidden;
  background:#fff; border:1px solid #e5e7eb; border-radius:10px;
  box-shadow: 0 16px 48px rgba(0,0,0,.18);
}
.m-more-body{ padding:8px; overflow-x:hidden; padding-bottom: calc(8px + env(safe-area-inset-bottom)); } /* ✅ [수정] 패널 본문도 하단 safe-area 보강 */

/* 하단 패널: 스크롤 가능 */
.mcal-bottom{
  margin-top:8px; border-top:1px solid #e5e7eb; padding:8px 6px; background:#fafafa;
  max-height:40vh; overflow:auto;
  /* ✅ [수정] 하단 safe-area 여백 추가 */
  padding-bottom: calc(8px + env(safe-area-inset-bottom));
}
.mcal-bottom-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:6px; }
.mcal-bottom-title{ font-weight:800; color:#111827; font-size:13px; }
.mcal-bottom-list{ display:grid; row-gap:6px; }
.mcal-bottom-empty{ color:#6b7280; font-size:12px; }

.m-bottom-item{ display:grid; row-gap:4px; }

/* ===== 하단 항목: 달력과 동일 색을 '항상' 강제하고, 어떤 상태에서도 변하지 않게 ===== */
.m-bottom-pill{
  pointer-events:auto; -webkit-tap-highlight-color:transparent;
  appearance:none; -webkit-appearance:none;
  border:none; outline:none; box-shadow:none;

  /* ▼ 버튼 전역 규칙/UA 규칙을 이겨내기 위해 상태색을 변수로 강제 */
  background: var(--pill-bg) !important;
  color:#fff !important;                      /* 하단 항목의 폰트색은 항상 흰색 */
}
.m-bottom-pill:hover,
.m-bottom-pill:active,
.m-bottom-pill:focus,
.m-bottom-pill:focus-visible,
.m-bottom-pill.open{
  border:none !important;
  outline:none !important;
  box-shadow:none !important;
  background: var(--pill-bg) !important;   /* 클릭/포커스/활성화/펼침 모두 동일 배경 유지 */
  color:#fff !important;                      /* 텍스트도 항상 흰색 */
}

/* 펼침된 상세(내용만 검정색) */
.m-bottom-note{
  white-space:pre-wrap; line-height:1.6; font-size:12px; color:#111827;
  background:#ffffff; border:1px solid #e5e7eb; border-radius:8px; padding:8px;
}

/* 스크롤바 */
.mcal-page, .m-more-body, .mcal-bottom{
  scrollbar-width:thin; scrollbar-color:#6366f1 #e5e7eb;
}
.mcal-page::-webkit-scrollbar,
.m-more-body::-webkit-scrollbar,
.mcal-bottom::-webkit-scrollbar{ width:10px; height:10px; }
.mcal-page::-webkit-scrollbar-thumb,
.m-more-body::-webkit-scrollbar-thumb,
.mcal-bottom::-webkit-scrollbar-thumb{
  background:#6366f1; border-radius:12px; border:2px solid #e5e7eb;
}
.mcal-page::-webkit-scrollbar-track,
.m-more-body::-webkit-scrollbar-track,
.mcal-bottom::-webkit-scrollbar-track{ background:#e5e7eb; }