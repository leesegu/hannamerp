/* ===== 전체 레이아웃 ===== */
.xp-page {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 10px;
  background: #ffffff;
  height: 100%;
  box-sizing: border-box;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Arial, sans-serif;
}

/* ===== 상단 바 (좌:버튼 / 우:축소 패널) ===== */
.xp-top {
  display: grid;
  grid-template-columns: 1fr auto; /* 우측 패널을 끝으로 붙임 */
  gap: 12px;
  align-items: stretch;
  position: relative;   /* ✅ 잘림 방지 */
  z-index: 2;           /* ✅ 상단이 다른 요소에 가려지지 않도록 */
}
.xp-top.slim { grid-template-columns: 1fr auto; }
.xp-top.fancy { margin-bottom: 2px; }

/* 좌측 버튼 그룹 */
.xp-actions {
  display: inline-grid;
  grid-auto-flow: column;
  grid-auto-columns: max-content;
  gap: 8px;
  align-items: center;
  justify-content: start;
}

/* 공통 버튼 */
.xp-btn {
  height: 38px;
  border: none;
  cursor: pointer;
  border-radius: 12px;
  color: #fff;
  font-weight: 800;
  font-size: 14px;
  letter-spacing: 0.2px;
  box-shadow: 0 10px 26px rgba(0,0,0,0.12);
  transition: transform .08s ease, box-shadow .12s ease, filter .12s ease;
}
.xp-btn.small { height: 38px; font-size: 14px; border-radius: 10px; }

/* 불러오기: 보라 */
.xp-load {
  background: linear-gradient(180deg, #e9ddff 0%, #b48cff 55%, #8b5cf6 100%);
  box-shadow: 0 10px 24px rgba(139,92,246,0.35);
}
.xp-load:hover { filter: brightness(1.06); box-shadow: 0 12px 28px rgba(139,92,246,0.45); }
.xp-load:active { transform: translateY(1px) scale(0.99); }

/* 저장: 블루 */
.xp-save {
  background: linear-gradient(180deg, #b9e6ff 0%, #47a3ff 60%, #2f7bdc 100%);
  box-shadow: 0 10px 24px rgba(71,163,255,0.35);
}
.xp-save:hover { filter: brightness(1.06); box-shadow: 0 12px 28px rgba(71,163,255,0.45); }
.xp-save:active { transform: translateY(1px) scale(0.99); }

/* 우측: 합계/지출일자 패널 (축소 + 우측 정렬) */
.xp-side {
  display: grid;
  grid-template-rows: 1fr 1fr;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(168, 85, 247, 0.22);
  background:
    radial-gradient(120% 100% at 0% 0%, rgba(216, 180, 254, 0.25) 0%, rgba(216,180,254,0) 60%),
    linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.78));
  backdrop-filter: blur(6px);
  justify-self: end;      /* 우측 정렬 */
  width: 260px;           /* ✅ 가로 폭 소폭 확대(기존 220px → 260px) */
}
.xp-side.narrow { width: 260px; } /* 명시적 클래스 */
.xp-side.fancy-panel { box-shadow: 0 20px 40px rgba(168,85,247,0.12); }

.xp-side-row {
  display: grid;
  grid-template-columns: 90px 60px 1fr;
  align-items: center;
  border-bottom: 1px solid rgba(168,85,247,0.18);
  padding: 6px 10px;
  font-size: 14px;
}
.xp-side-row:last-child { border-bottom: 0; }
.xp-side-sum {
  background: linear-gradient(180deg, rgba(243,232,255,0.55), rgba(233,213,255,0.3));
}
.xp-side-label { font-weight: 800; color: #3b0764; }
.xp-side-krw { text-align: center; font-weight: 900; color: #1f2937; }
.xp-side-val { text-align: right; font-weight: 900; color: #111827; padding-right: 4px; }
.xp-side-date { grid-template-columns: 90px 1fr; cursor: pointer; }
.xp-date-input {
  height: 28px;
  border: 1px solid #c4b5fd;
  border-radius: 8px;
  padding: 0 10px;
  background: #ffffff;
  font-size: 13px;
  color: #111827;
  outline: none;
}
.xp-date-input:focus {
  border-color: #8b5cf6;
  box-shadow: 0 0 0 3px rgba(139,92,246,0.22);
}

/* ===== 테이블 ===== */
.xp-table-wrap {
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  overflow: hidden;
  background: #fff;
}
.xp-table-wrap.scrollable {
  max-height: calc(100vh - 210px);
  overflow: auto;
}

/* 스크롤바 연보라 */
.xp-table-wrap.scrollable::-webkit-scrollbar,
.combo-panel::-webkit-scrollbar,
.scombo-panel::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}
.xp-table-wrap.scrollable::-webkit-scrollbar-thumb,
.combo-panel::-webkit-scrollbar-thumb,
.scombo-panel::-webkit-scrollbar-thumb {
  background: #d8b4fe;
  border-radius: 8px;
  border: 2px solid #f5f3ff;
}
.xp-table-wrap.scrollable::-webkit-scrollbar-track,
.combo-panel::-webkit-scrollbar-track,
.scombo-panel::-webkit-scrollbar-track {
  background: #faf5ff;
  border-radius: 8px;
}

.xp-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}

/* 헤더: 보라 + 흰 글자 */
.xp-table thead th {
  background: linear-gradient(180deg, #a78bfa 0%, #8b5cf6 100%);
  color: #ffffff;
  font-weight: 800;
  font-size: 13px;
  height: 36px;
  border-right: 1px solid rgba(255,255,255,0.25);
}
.xp-table thead th:last-child { border-right: 0; }

.xp-table tbody td {
  border-top: 1px solid #f3f4f6;
  border-right: 1px solid #f3f4f6;
  height: 34px;
  padding: 4px;
  background: #fff;
}
.xp-table tbody td:last-child { border-right: 0; }

/* 번호 칸 */
.xp-td-no { text-align: center; color: #6b7280; }

/* 입력 공통 */
.xp-input, .xp-select {
  width: 100%;
  height: 28px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  padding: 0 8px;
  font-size: 13px;
  outline: none;
  background: #fff;
}
.xp-input:focus, .xp-select:focus {
  border-color: #a78bfa;
  box-shadow: 0 0 0 2px rgba(167,139,250,0.25);
}

/* 금액 우측정렬 */
.xp-amt { text-align: right; }

/* ✅ 출금완료 시 “대분류~출금확인(2~8열)”을 더 진한 회색으로 덮고 내용에도 선 */
.xp-tr-paid td:nth-child(n+2):nth-child(-n+8),
.xp-td-dim-dark {
  background: #cbd5e1 !important; /* 더 진한 회색(이전 #e2e8f0 → #cbd5e1) */
  color: #374151;
}

/* ✅ 선(취소선) 처리: 해당 범위의 입력/버튼/텍스트에 적용 */
.xp-tr-paid td:nth-child(n+2):nth-child(-n+8) .xp-input,
.xp-tr-paid td:nth-child(n+2):nth-child(-n+8) .scombo-btn,
.xp-tr-paid td:nth-child(n+2):nth-child(-n+8) .combo-input {
  text-decoration: line-through;
  background-color: #cbd5e1; /* 동일 톤으로 덮음 */
}

/* 드롭다운 버튼 내부 텍스트가 잘 보이도록 */
.xp-tr-paid td:nth-child(n+2):nth-child(-n+8) .scombo-text {
  text-decoration: line-through;
}

/* ===== 하단 버튼 ===== */
.xp-bottom-actions {
  margin-top: 8px;
  display: flex;
  justify-content: flex-end;
}
.xp-add-rows {
  height: 36px;
  border: 1px solid #d1d5db;
  background: #fff;
  border-radius: 8px;
  padding: 0 12px;
  cursor: pointer;
  font-weight: 600;
}
.xp-add-rows:hover { background: #f9fafb; }

/* ===== 검색형 콤보 ===== */
.combo { position: relative; }
.combo-input { padding-right: 32px; }
.combo-panel {
  position: absolute;
  z-index: 30;
  left: 0; right: 0; top: calc(100% + 4px);
  border: 1px solid #d1d5db;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 16px 40px rgba(0,0,0,0.12);
  max-height: 260px;
  overflow: auto;
}
.combo-empty { padding: 10px 12px; color: #6b7280; font-size: 12px; }
.combo-item {
  width: 100%;
  text-align: left;
  border: 0;
  background: #fff;
  padding: 8px 12px;
  cursor: pointer;
}
.combo-item:hover { background: #f3f4f6; }
.combo-line1 { font-weight: 700; font-size: 13px; color: #111827; }
.combo-line2 { display: flex; gap: 8px; margin-top: 2px; font-size: 12px; color: #374151; }
.combo-bank { font-weight: 600; }
.combo-acc { letter-spacing: 0.3px; }
.combo-holder { color: #6b7280; }

/* ===== SimpleCombo ===== */
.scombo { position: relative; }
.scombo-btn {
  display: flex; align-items: center; justify-content: space-between;
  gap: 8px;
  text-align: left;
}
.scombo-placeholder { color: #9ca3af; }
.scombo-text { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.scombo-caret, .scombo-caret-input {
  position: absolute; right: 6px; top: 50%; transform: translateY(-50%);
  color: #6b7280; font-size: 16px; cursor: pointer;
}
.scombo-panel {
  position: absolute; z-index: 25; left: 0; right: 0; top: calc(100% + 4px);
  border: 1px solid #d1d5db; background: #fff; border-radius: 8px;
  box-shadow: 0 16px 40px rgba(0,0,0,0.12);
  max-height: 220px; overflow: auto;
}
.scombo-item {
  width: 100%; text-align: left; border: 0; background: #fff;
  padding: 8px 12px; cursor: pointer; font-size: 13px;
}
.scombo-item:hover { background: #f3f4f6; }
.scombo-empty { padding: 10px 12px; color: #6b7280; font-size: 12px; }