/* =========================================
   MobilePersonalLedgerPage.css (scoped)
========================================= */

.mplg {
  --bg: #0c0f15;
  --bg-2: #111826;
  --card: rgba(255,255,255,0.06);
  --line: rgba(255,255,255,0.12);
  --ink: #eef1ff;

  --primary: #7b5cff;
  --primary-2: #00e6ff;
  --green: #28e6a6;
  --red: #ff6b81;
  --muted: #a9b3d6;

  color: var(--ink);
  background: linear-gradient(180deg, #0a0f1e 0%, #0e1430 40%, #0c0f15 100%);
  min-height: 100vh;

  /* 스크롤 보강 */
  height: 100dvh;
  /* ▼ 수정: 상단 safe-area 여백 추가 */
  /* ▼ 수정: 하단 safe-area 여백 추가 (기존 24px → calc(32px + safe-area)) */
  padding: calc(14px + env(safe-area-inset-top)) 12px calc(32px + env(safe-area-inset-bottom)); /* ✅ [수정] */
  box-sizing: border-box;
  overflow-x: hidden;
  overflow-y: auto;
}

/* 헤더 */
.mplg .mplg-top {
  display: grid;
  grid-template-columns: 1fr auto 1fr;  /* ✅ 좌우 균등폭으로 변경 */
  align-items: center;
  gap: 58px;
  margin-bottom: 10px;
}
.mplg .mplg-title {
  justify-self: center;  /* ✅ 가운데 정렬 */
  text-align: center;
}

.mplg .back-btn {
  display: inline-grid;
  grid-auto-flow: column;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 12px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,0.06);
  color: var(--ink);
}
.mplg .back-btn .back-icon { font-weight: 900; font-size: 14px; line-height: 1; }
.mplg .back-btn .back-text { font-weight: 700; font-size: 14px; letter-spacing: .2px; }

.mplg .back-btn.luxe{
  background: linear-gradient(90deg, rgba(123,92,255,.25), rgba(0,230,255,.25));
  border-color: rgba(255,255,255,.35);
  box-shadow: 0 6px 16px rgba(123,92,25, .25), inset 0 1px 0 rgba(255,255,255,.2);
}

/* 타이틀 */
.mplg .mplg-title {
  display: inline-grid;
  grid-auto-flow: column;
  gap: 8px;
  align-items: center;
  font-size: 18px;
  font-weight: 700;
  letter-spacing: 0.2px;
  justify-self: center;
}

/* 우측 상단 버튼 */
.mplg .top-right { display: grid; }
.mplg .year-btn{
  padding: 8px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.35);
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
  color: #e7eaff;
  font-weight: 800;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.2);
}

/* 합계 카드 */
.mplg .mplg-cards {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin-bottom: 14px;
}
.mplg .mplg-card {
  border-radius: 16px;
  padding: 10px 10px 8px;
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
  border: 1px solid var(--line);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), 0 8px 24px rgba(0,0,0,0.35);
}
.mplg .mplg-card .label {
  font-size: 14px;
  color: var(--muted);
  margin-bottom: 5px;
}
.mplg .mplg-card .value { font-size: 14px; font-weight: 800; letter-spacing: .2px; }
.mplg .mplg-card .value.nowrap{ white-space: nowrap; }
.mplg .mplg-card .value.small{ font-size: 14px; }
.mplg .mplg-card.income { outline: 2px solid rgba(40,230,166,.18); }
.mplg .mplg-card.expense { outline: 2px solid rgba(255,107,129,.18); }
.mplg .mplg-card.diff.pos { outline: 2px solid rgba(123,92,255,.22); }
.mplg .mplg-card.diff.neg { outline: 2px solid rgba(255,107,129,.22); }

/* 폼 */
.mplg .mplg-form {
  border-radius: 18px;
  border: 1px solid var(--line);
  background: radial-gradient(120% 120% at 0% 0%, rgba(123,92,255,.18), transparent 50%),
              radial-gradient(120% 120% at 100% 0%, rgba(0,230,255,.14), transparent 55%),
              var(--card);
  padding: 12px;
  margin-bottom: 14px;
}
.mplg .seg {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
  margin-bottom: 10px;
}
.mplg .seg-btn {
  border-radius: 999px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,0.06);
  color: var(--ink);
  padding: 10px 0;
  font-weight: 700;
  text-align: center;
  font-size: 16px;
}
.mplg .seg-btn.on {
  background: linear-gradient(90deg, rgba(123,92,255,.35), rgba(0,230,255,.35));
  border-color: rgba(255,255,255,0.35);
  box-shadow: 0 6px 16px rgba(123,92,255,.25);
}
.mplg .row { display: grid; gap: 6px; margin-bottom: 10px; }
.mplg .row label { font-size: 12px; color: #c9cffb; }
.mplg .inp {
  width: 100%;
  box-sizing: border-box;
  background: rgba(0,0,0,0.2);
  border: 1px solid var(--line);
  color: var(--ink);
  border-radius: 12px;
  padding: 12px 12px;
  font-size: 15px;
  text-align: left;
}
.mplg .inp::placeholder { color: #97a1cc; }
.mplg .inp.amt { font-weight: 800; letter-spacing: .2px; }

/* 날짜 */
.mplg .row-calendar { cursor: pointer; }
.mplg .row-calendar .date-hidden{ position:absolute!important; opacity:0!important; pointer-events:none!important; width:0; height:0; }
.mplg .row-calendar .date-display{
  display: grid; grid-auto-flow: column;
  justify-content: space-between; align-items: center;
  background: rgba(0,0,0,0.2);
  border: 1px solid var(--line); color: var(--ink);
  border-radius: 12px; padding: 12px 12px; font-size: 15px;
}
.mplg .row-calendar .date-display .date-caret{ opacity:.9; }

/* 액션 */
.mplg .actions { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px; }
.mplg .btn {
  display: grid; place-items: center; min-height: 48px;
  padding: 12px 12px; border-radius: 12px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,0.06); color: var(--ink);
  font-weight: 800; text-align: center; font-size: 16px;
}
.mplg .btn.save{ background: linear-gradient(90deg, #7b5cff, #00e6ff); border: none; color:#0c0f15; text-shadow:0 1px 0 rgba(255,255,255,.25); }
.mplg .btn.reset{ border: 1px solid rgba(255,255,255,.45); background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02)); color:#dfe4ff; box-shadow: inset 0 1px 0 rgba(255,255,255,.2); }

/* 리스트 */
.mplg .mplg-list { display: grid; gap: 8px; padding-bottom: calc(80px + env(safe-area-inset-bottom)); } /* ✅ [수정] 하단 여백에 safe-area 포함 */
.mplg .empty { text-align: center; color: #c3caf0; padding: 20px 0; }
.mplg .item {
  display: grid; grid-template-rows: auto auto; gap: 6px;
  padding: 12px; border-radius: 16px; background: rgba(255,255,255,0.06); border: 1px solid var(--line);
}
.mplg .item.compact{ padding: 10px; border-radius: 14px; background: rgba(255,255,255,0.08); }
.mplg .item .line1, .mplg .item .line2{
  display: grid; grid-template-columns: 1fr max-content; align-items: center; gap: 8px;
}
.mplg .item .l1-left{ display:inline-flex; gap:8px; align-items:center; min-width:0; }
.mplg .item .ty{
  font-size: 11px; font-weight: 900; padding: 2px 8px; border-radius: 999px; text-align: center; border: 1px solid var(--line);
}
.mplg .item.income .ty{ background: rgba(40,230,166,.25); color:#06281f; border-color: rgba(40,230,166,.5); }
.mplg .item.expense .ty{ background: rgba(255,107,129,.28); color:#3a0c13; border-color: rgba(255,107,129,.5); }
.mplg .item .amt{ font-weight: 900; letter-spacing:.2px; color:#fff; text-shadow:0 1px 0 rgba(0,0,0,.35); }
.mplg .item .amt.nowrap{ white-space: nowrap; }
.mplg .item.income .amt{ color:#6ef0c6; }
.mplg .item.expense .amt{ color:#ff9aa8; }
.mplg .item .line1 .date{ color:#d1d6ff; font-size:12px; }

.mplg .item .l2-left{ display:inline-flex; align-items:baseline; gap:6px; min-width:0; }
.mplg .item .party-strong{ color:#e9ecff; font-weight:800; max-width:50%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.mplg .item .comma{ color:#bfc6f5; opacity:.9; }
.mplg .item .title{ font-weight:700; color:#f7f8ff; max-width:50%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

.mplg .item .l2-right{ display:inline-grid; grid-auto-flow:column; gap:6px; }
.mplg .mini-btn{
  padding: 6px 10px; font-size: 12px; line-height:1; border-radius: 999px;
  border: 1px solid var(--line); background: rgba(255,255,255,.10); color:#e9ecff; min-width:54px; text-align:center; font-weight:800;
}
.mplg .mini-btn.edit{ border-color: rgba(123,92,255,.55); background: rgba(123,92,255,.18); }
.mplg .mini-btn.del{ border-color: rgba(255,107,129,.55); background: rgba(255,107,129,.18); color:#ffe6ea; }

.mplg .item.editing{ outline: 2px solid rgba(123,92,255,.5); }
.mplg .item .mid .memo{ display:none!important; }
.mplg .item .right .quick{ display:none!important; }

/* 달력 모달 */
.mplg .cal-overlay{ position:fixed; inset:0; background: rgba(0,0,0,0.5); display:grid; place-items:center; z-index:9999; }
.mplg .cal{
  width: min(92vw, 360px); border-radius: 16px; border:1px solid var(--line);
  background: radial-gradient(130% 130% at 0% 0%, rgba(123,92,255,.18), transparent 50%),
              radial-gradient(130% 130% at 100% 0%, rgba(0,230,255,.14), transparent 55%),
              rgba(20,22,35,0.95);
  box-shadow: 0 12px 36px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.1);
  padding: 12px;
}
.mplg .cal-header{ display:grid; grid-template-columns:32px 1fr 32px; align-items:center; margin-bottom:8px; }
.mplg .cal-header .ym{ text-align:center; font-weight:900; letter-spacing:.4px; }
.mplg .cal-header .nav{ width:32px; height:32px; border-radius:10px; border:1px solid var(--line); background: rgba(255,255,255,.06); color:var(--ink); }
.mplg .cal-grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:6px; }
.mplg .cal-grid .wd{ text-align:center; font-size:12px; color:#b8c0e6; }
.mplg .cal-grid .emp{ visibility:hidden; }
.mplg .cal-grid .day{ height:40px; border:1px solid var(--line); background: rgba(255,255,255,0.06); color:var(--ink); border-radius:10px; }
.mplg .cal-grid .day.sel{ background: linear-gradient(90deg, rgba(123,92,255,.35), rgba(0,230,255,.35)); border-color: rgba(255,255,255,.5); font-weight:900; }
.mplg .cal-actions{ display:grid; grid-auto-flow:column; gap:8px; margin-top:10px; justify-content:end; }
.mplg .cal-actions .pill{ padding:8px 12px; border-radius: 999px; border:1px solid var(--line); background: rgba(255,255,255,.06); color:var(--ink); }
.mplg .cal-actions .today{ background: linear-gradient(90deg, #7b5cff, #00e6ff); border:none; color:#0c0f15; font-weight:800; }

/* 요약 모달 */
.mplg .year-overlay{ position:fixed; inset:0; background: rgba(0,0,0,.55); display:grid; place-items:center; z-index:10000; }
.mplg .year-modal{
  width: min(94vw, 520px); max-height: 90vh; overflow:hidden;
  border-radius: 16px; border:1px solid var(--line);
  background: radial-gradient(120% 120% at 0% 0%, rgba(123,92,255,.18), transparent 50%),
              radial-gradient(120% 120% at 100% 0%, rgba(0,230,255,.14), transparent 55%),
              rgba(20,22,35,.98);
  box-shadow: 0 12px 36px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.1);
  padding: 12px;
}
.mplg .year-head.trio{
  display:grid; grid-template-columns: 1fr max-content; align-items:center; gap:8px; margin-bottom:8px;
}
.mplg .year-head .title{ font-size:20px; font-weight:900; letter-spacing:.3px; }
.mplg .year-head .title.white{ color:#fff; }

.mplg .year-head .year-head-controls{
  display:grid; grid-auto-flow: column; align-items:center; gap:10px; /* 드롭다운과 X 간격 */
}

/* 접근성용 숨김 select */
.mplg .sr-only{
  position:absolute !important; width:1px !important; height:1px !important;
  padding:0 !important; margin:-1px !important; overflow:hidden !important; clip:rect(0,0,0,0) !important; white-space:nowrap !important; border:0 !important;
}

/* 커스텀 드롭다운 */
.mplg .year-dd{ position:relative; }
.mplg .year-trigger{
  height:40px; min-width:110px;
  display:inline-flex; align-items:center; justify-content:space-between;
  padding:0 12px; border-radius:10px; border:1px solid rgba(255,255,255,.35);
  background:
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04)),
    radial-gradient(120% 120% at 0% 0%, rgba(123,92,255,.25), transparent 55%),
    rgba(255,255,255,.04);
  color:var(--ink); font-weight:800;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.25), 0 6px 16px rgba(123,92,255,.25);
}
.mplg .year-trigger .year-trigger-label{ line-height:1; }
.mplg .year-trigger .caret{ opacity:.9; }

.mplg .year-menu{
  position:absolute; top:calc(100% + 6px); right:0; z-index:10;
  width:160px; max-height: 280px; overflow:auto;
  border-radius:12px; border:1px solid rgba(255,255,255,.35);
  background:
    radial-gradient(120% 120% at 0% 0%, rgba(123,92,255,.18), transparent 55%),
    rgba(20,22,35,.99);
  box-shadow: 0 12px 36px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.1);
  backdrop-filter: blur(8px);
}
.mplg .year-option{
  width:100%; text-align:left;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:10px 12px; border:0; background:transparent; color:#e9ecff; font-weight:700;
}
.mplg .year-option:hover{ background: rgba(255,255,255,.06); }
.mplg .year-option.sel{
  background: linear-gradient(90deg, rgba(123,92,255,.25), rgba(0,230,255,.25));
  color:#0c0f15; text-shadow: 0 1px 0 rgba(255,255,255,.25);
  font-weight:900;
}

.mplg .year-head .x.square{
  width:40px; height:40px; border-radius:10px;
  border:1px solid var(--line); background: rgba(255,255,255,.06);
  color:var(--ink); display:grid; place-items:center;
}

.mplg .year-body{
  overflow-y:auto;
  max-height: calc(90vh - 12px - 46px - 48px); /* 전체-패딩-헤더-푸터 근사치 */
  padding-right:4px; scrollbar-gutter: stable;
}

/* 표 */
.mplg .year-table{ display:grid; gap:6px; margin-top:6px; }
.mplg .y-row{
  display:grid; grid-template-columns: 60px 1fr 1fr 1fr; gap:8px;
  padding:8px 10px; border-radius:12px; border:1px solid var(--line); background: rgba(255,255,255,.05);
}
.mplg .y-row.y-head{ background: rgba(255,255,255,.1); font-weight:900; }
.mplg .y-row .pos{ color:#6ef0c6; font-weight:800; }
.mplg .y-row .neg{ color:#ff9aa8; font-weight:800; }
.mplg .y-row .diff.pos{ color:#a89cff; }
.mplg .y-row .diff.neg{ color:#ffb0bc; }
.mplg .y-row.y-month{ cursor:pointer; }
.mplg .y-row .nowrap{ white-space: nowrap; }

/* 월 상세(일자별) — 줄바꿈 방지 + 작은 폰트 */
.mplg .y-days{
  display:grid; gap:4px; margin:6px 0 10px 0;
  padding:8px; border-radius:12px; border:1px dashed rgba(255,255,255,.25); background: rgba(255,255,255,.03);
}
.mplg .y-days-head,
.mplg .y-days-row{
  display:grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap:8px;
  padding:6px 8px; border-radius:8px; border:1px solid var(--line); background: rgba(255,255,255,.04);
}
.mplg .y-days-head{ font-weight:900; background: rgba(255,255,255,.08); }
.mplg .y-days-empty{ color:#d9ddff; text-align:center; padding:6px 0; }

.mplg .nowrap-rows > *{ white-space: nowrap; } /* 펼친 내용 줄바꿈 방지 */
.mplg .small-rows{ font-size: 13px; }          /* 펼친 내용 소형 폰트 */

.mplg .loading{ text-align:center; color:#d9ddff; padding:8px 0; }
.mplg .year-foot{ display:grid; justify-content:end; margin-top:10px; }