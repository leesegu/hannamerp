:root{
  --bg: #f5f3ff;
  --card: #ffffff;
  --border: #e9e4ff;
  --ink: #2f2a49;
  --muted: #7e76ad;
  --brand: #6a58ff;
  --brand2: #a68bff;
  --good: #17a06a;
  --bad: #e04e4e;
  --shadow: 0 14px 36px rgba(106,88,255,.12), 0 2px 10px rgba(0,0,0,.05);

  /* 추가: 화려한 그라디언트 팔레트 */
  --grad-1: linear-gradient(135deg,#7b5cff 0%,#5fd4ff 50%,#7bffbe 100%);
  --grad-2: linear-gradient(135deg,#ff8ad6 0%,#8aa3ff 50%,#7efff2 100%);
  --grad-3: linear-gradient(135deg,#ffd36e 0%,#ff7ea8 50%,#8a7bff 100%);
  --glass: rgba(255,255,255,.35);
}

*{ box-sizing: border-box; }
body{ background: var(--bg); color: var(--ink); }
.as-wrap{ padding: 18px; display:flex; flex-direction:column; gap:18px; }

/* ===== Header (화려한 배경 + 글램 폰트) ===== */
.as-header{
  display:grid; grid-template-columns: 1fr 2fr auto; gap:14px;
  align-items:center;
  background: var(--card);
  border:1px solid var(--border); border-radius:18px; box-shadow:var(--shadow);
  padding:16px;
  position: relative;
  overflow: hidden;
}
.as-header.fancy{
  background: var(--grad-1);
  border: 0;
}
.as-header.fancy::before{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(1200px 300px at 20% -10%, rgba(255,255,255,.35), transparent 60%),
              radial-gradient(800px 300px at 110% 110%, rgba(255,255,255,.25), transparent 60%);
  pointer-events:none;
}
.as-header.fancy::after{
  /* 유리감 오버레이 */
  content:"";
  position:absolute; inset:0;
  background: linear-gradient(180deg, rgba(255,255,255,.15), rgba(255,255,255,.05));
  pointer-events:none;
}

/* 현재 연도 & 서브 타이틀 (화려한 폰트/텍스트 효과) */
.as-year{ display:flex; flex-direction:column; line-height:1; z-index:1; }
.as-year-num{
  font-size:64px; font-weight:1000; letter-spacing:1.5px;
  color:#fff; text-shadow: 0 6px 18px rgba(0,0,0,.25);
}
.glam-year{
  background: linear-gradient(90deg,#fff 0%,#f6fffb 50%,#fff 100%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
  text-shadow:none;
}
.as-year-sub{
  margin-top:6px; font-weight:900; letter-spacing:.6px;
  color:#f2f7ff; opacity:.95;
}
.glam-sub{
  background: linear-gradient(90deg,#fff,#ffe8f8);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}

/* ===== KPI 카드 (아이콘 + 제목 좌상단 / 금액 우하단 대각) ===== */
.as-metrics{ display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:10px; z-index:1; }
.metric{
  position: relative;
  background:#fff; border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow);
  padding:16px 16px 18px 16px; min-height:88px;
}
.glam-card{
  background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.55));
  border:0;
  backdrop-filter: blur(6px);
  overflow:hidden;
}
.glam-card::before{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(600px 120px at -10% -20%, rgba(255,255,255,.6), transparent 60%),
              radial-gradient(600px 160px at 120% 120%, rgba(255,255,255,.35), transparent 60%);
  pointer-events:none;
}
.metric.inc{ box-shadow: 0 12px 28px rgba(16,185,129,.18); }
.metric.exp{ box-shadow: 0 12px 28px rgba(244,63,94,.16); }
.metric.net.good{ box-shadow: 0 12px 28px rgba(16,185,129,.18); }
.metric.net.bad{ box-shadow: 0 12px 28px rgba(244,63,94,.16); }

.m-title{
  font-size:13px; font-weight:900; color:#6f67a8;
}
.glam-title{
  position:absolute; top:12px; left:14px;
  display:flex; align-items:center; gap:8px;
  font-size:15px; font-weight:1000; letter-spacing:.2px;
  color:#2b235d;
}
.glam-title i{ font-size:18px; opacity:.9; }

.m-value{ margin-top:6px; font-size:26px; font-weight:1000; }
.m-value.m-sm{ font-size:22px; }
.glam-value{
  position:absolute; right:14px; bottom:12px;
  font-size:24px; font-weight:1000; letter-spacing:.2px;
  text-align:right;
}
.metric.inc .glam-value{ color:#059669; }
.metric.exp .glam-value{ color:#e11d48; }
.metric.net.good .glam-value{ color:#0ea5e9; }
.metric.net.bad  .glam-value{ color:#e11d48; }

/* ===== 화려한 드롭다운 ===== */
.as-controls{ display:flex; justify-content:flex-end; z-index:1; }
.year-select{
  display:flex; align-items:center; gap:10px; color:#ffffff; font-weight:800;
}
.glam-controls .sel-label{
  padding:6px 10px; border-radius:10px; background: rgba(255,255,255,.2);
  border:1px solid rgba(255,255,255,.35);
}
.year-select select{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  padding:10px 40px 10px 14px;
  border-radius:12px;
  background: var(--glass);
  color:#0f1240; font-weight:900; letter-spacing:.4px;
  border:1px solid rgba(255,255,255,.55);
  outline:none; box-shadow: 0 8px 22px rgba(0,0,0,.12) inset, 0 2px 6px rgba(0,0,0,.06);
  backdrop-filter: blur(6px);
  cursor:pointer;
}
/* 커스텀 화살표 */
.glam-select{ position:relative; }
.glam-select::after{
  content:"▾";
  position:absolute; right:12px; top:50%; transform: translateY(-50%);
  font-size:14px; color:#1b1e50; pointer-events:none;
}

/* ▼▼▼ 드롭다운 목록(옵션) 스타일 강화 ▼▼▼ */
.year-select select:focus{
  border-color: rgba(255,255,255,.9);
  box-shadow:
    0 0 0 3px rgba(255,255,255,.65),
    0 0 0 6px rgba(107,90,255,.45),
    0 8px 22px rgba(0,0,0,.12) inset;
}

/* 옵션 기본 스타일 */
.year-select select option{
  background: linear-gradient(180deg,#ffffff 0%,#f5f7ff 100%);
  color:#1b1e50;
  font-weight:900;
  font-size:14px;
  padding:8px 12px;
}

/* 옵션 Hover/Focus */
.year-select select option:hover,
.year-select select option:focus{
  background: linear-gradient(180deg,#eaf0ff 0%,#fffbe6 100%);
  color:#0f1240;
}

/* 현재 선택된 옵션 */
.year-select select option:checked{
  background: linear-gradient(180deg,#dfe7ff 0%,#e9fff7 100%);
  color:#0f1240;
}

/* 스크롤바 커스텀 (WebKit) */
.year-select select::-webkit-scrollbar{ width: 10px; }
.year-select select::-webkit-scrollbar-track{ background: rgba(0,0,0,.06); border-radius: 8px; }
.year-select select::-webkit-scrollbar-thumb{ background: linear-gradient(180deg,#7b5cff,#5fd4ff); border-radius: 8px; }
.year-select select::-webkit-scrollbar-thumb:hover{ filter: brightness(1.05); }
.year-select select::-ms-expand{ display:none; }

/* ===== Section Titles (화려한 패널) ===== */
.as-section{ display:flex; flex-direction:column; gap:10px; }
.as-sec-title{
  font-weight:1000; color:#4d3eea; padding:6px 12px; border:1px dashed var(--border); border-radius:12px; background:#faf9ff; width:fit-content;
}
.glam-sec{
  border:0; color:#111;
  background: var(--grad-3);
  padding:10px 14px;
  border-radius:14px;
  box-shadow: 0 10px 26px rgba(0,0,0,.12);
  font-size:15px;
  letter-spacing:.3px;
}

/* ===== Chart ===== */
.as-chart-card{
  background:#fff; border:1px solid var(--border); border-radius:18px; box-shadow:var(--shadow); padding:10px;
  overflow-x: hidden;
}
.as-chart{ width:100%; max-width:1400px; height:340px; display:block; }
.as-chart .grid{ stroke:#eee9ff; stroke-width:1; }
.as-chart .grid-v{ stroke:#efeaff; stroke-width:1; }
.as-chart .tick{ font-size:12px; fill:#8a82bf; }
.as-chart .bar-inc{ fill:#2a82ff; opacity:.88; }
.as-chart .bar-exp{ fill:#ff654d; opacity:.88; }
.as-chart .line-net{ stroke:#20b36a; stroke-width:2.2; }
.as-chart .net-point{ fill:#20b36a; }

/* 좌측 패딩 범례(그래프 밖) */
.legend-left .tick{ font-weight:800; fill:#7f77ba; }

/* ===== Tables ===== */
.as-table-card{
  background:#fff; border:1px solid var(--border); border-radius:18px; box-shadow:var(--shadow);
  padding:10px;
}
.as-table-wrap{
  overflow-y: auto;
  overflow-x: hidden;
  border-radius:12px; border:1px solid var(--border);
}
.as-table{ width:100%; border-collapse: collapse; background:#fff; }
.as-table thead th{
  position:sticky; top:0; z-index:1; background:linear-gradient(0deg,#f7f5ff,#ffffff 70%); color:#4b3d86;
  text-align:left; font-weight:1000; font-size:13px; border-bottom:1px solid var(--border);
  padding:10px 12px; white-space: nowrap;
}
.as-table td{
  border-bottom:1px solid #f1ecff; padding:10px 12px; font-size:14px;
}
.as-table .num,
.as-table .total,
.as-table .nowrap{ white-space: nowrap; }

.as-table .m-num-sm{ font-size:11px; }

/* “요약/수입/지출/결제방법”의 항목 폰트 살짝 축소 */
.as-table.as-summary .label,
.as-table.as-income  .label,
.as-table.as-expense .label,
.as-table.as-pay     .label{
  font-size:13px;
  font-weight:900;
  color:#3a2f8a;
}

.as-table tfoot td{ position:sticky; bottom:0; background:#fff; }
.as-table .num{ text-align:right; font-variant-numeric: tabular-nums; }
.as-table .label{ font-weight:900; color:#3a2f8a; }
.as-table .total{ font-weight:1000; background:#faf9ff; }
.as-table .empty{ text-align:center; color:#9a90c7; padding:18px 8px; }

/* ✅ 지출 대분류 소계 강조 */
.as-table.as-expense tr.as-subtotal td{
  background:#f9f7ff;
  font-weight:1000;
  border-top:1px dashed var(--border);
}

/* Overlay Loader */
.as-overlay{
  position:fixed; inset:0; background:rgba(255,255,255,.55); backdrop-filter: blur(2px);
  display:flex; align-items:center; justify-content:center; z-index:60;
}
.as-overlay.err{ background:rgba(255,240,240,.65); }
.as-loader{
  background:#fff; border:1px solid var(--border); border-radius:14px; box-shadow: var(--shadow);
  padding:16px 18px; font-weight:900; color:#4f3fe6; display:flex; align-items:center; gap:10px;
}
.as-loader .spin{
  width:18px; height:18px; border-radius:50%; border:3px solid #d8d3ff; border-top-color:#6a58ff; display:inline-block;
  animation: asspin .9s linear infinite;
}
@keyframes asspin { to { transform: rotate(1turn); } }

/* Responsive */
@media (max-width: 1100px){
  .as-header{ grid-template-columns: 1fr; }
  .as-metrics{ grid-template-columns: 1fr; }
}
